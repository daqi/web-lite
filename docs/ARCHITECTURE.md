# ğŸ—ï¸ Web Lite é¡¹ç›®æ¶æ„è¯´æ˜

> åŸºäº **JSON æ¨¡å‹é©±åŠ¨å¼€å‘** çš„ç°ä»£åŒ–åç«¯æ¶æ„è®¾è®¡

## ğŸ“‘ ç›®å½•

- [æ¶æ„æ¦‚è§ˆ](#-æ¶æ„æ¦‚è§ˆ)
- [æ ¸å¿ƒè®¾è®¡ç†å¿µ](#-æ ¸å¿ƒè®¾è®¡ç†å¿µ)
- [ç›®å½•ç»“æ„](#-ç›®å½•ç»“æ„)
- [åˆ†å±‚æ¶æ„](#-åˆ†å±‚æ¶æ„)
- [æ•°æ®æµè½¬](#-æ•°æ®æµè½¬)
- [æ¨¡å‹é©±åŠ¨å¼€å‘](#-æ¨¡å‹é©±åŠ¨å¼€å‘)
- [è‡ªåŠ¨åŒ–æ³¨å†Œæœºåˆ¶](#-è‡ªåŠ¨åŒ–æ³¨å†Œæœºåˆ¶)
- [ç±»å‹å®‰å…¨ä½“ç³»](#-ç±»å‹å®‰å…¨ä½“ç³»)
- [ä»£ç ç”Ÿæˆæµç¨‹](#-ä»£ç ç”Ÿæˆæµç¨‹)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)

---

## ğŸ¯ æ¶æ„æ¦‚è§ˆ

Web Lite æ˜¯ä¸€ä¸ª**æ¨¡å‹é©±åŠ¨ã€çº¦å®šä¼˜äºé…ç½®**çš„è½»é‡çº§ Web åç«¯æ¡†æ¶ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

âœ… **JSON æ¨¡å‹é©±åŠ¨** - é€šè¿‡ç®€å•çš„ JSON é…ç½®è‡ªåŠ¨ç”Ÿæˆå…¨éƒ¨ä»£ç 
âœ… **é›¶é…ç½®æ³¨å†Œ** - Schema å’Œè·¯ç”±è‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤
âœ… **ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨** - ä»æ•°æ®åº“åˆ° API çš„å®Œæ•´ç±»å‹æ¨å¯¼
âœ… **æ™ºèƒ½é»˜è®¤å€¼** - è‡ªåŠ¨åº”ç”¨æœ€ä½³å®è·µé…ç½®
âœ… **åˆ†å±‚æ¶æ„** - Repository â†’ Service â†’ Route æ¸…æ™°åˆ†ç¦»
âœ… **é«˜æ€§èƒ½** - Hono + Drizzle ORM + PostgreSQL

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JSON æ¨¡å‹å®šä¹‰                          â”‚
â”‚              (src/models/*.model.json)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ä»£ç ç”Ÿæˆå™¨ (model-generator)                 â”‚
â”‚  â€¢ è§£æ JSON æ¨¡å‹                                         â”‚
â”‚  â€¢ åº”ç”¨é»˜è®¤å€¼å’ŒéªŒè¯                                       â”‚
â”‚  â€¢ ç”Ÿæˆæ‰€æœ‰å±‚ä»£ç                                          â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚          â”‚          â”‚          â”‚          â”‚
    â–¼          â–¼          â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Schema â”‚ â”‚Validatorâ”‚ â”‚Repositoryâ”‚ â”‚Service â”‚ â”‚ Route  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚            â”‚          â”‚
    â”‚           â”‚           â”‚            â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    è‡ªåŠ¨æ³¨å†Œæœºåˆ¶          â”‚
        â”‚  â€¢ Schema è‡ªåŠ¨å¯¼å‡º      â”‚
        â”‚  â€¢ Route è‡ªåŠ¨æ³¨å†Œ       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      HTTP API           â”‚
        â”‚  GET/POST/PUT/DELETE    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ æ ¸å¿ƒè®¾è®¡ç†å¿µ

### 1. æ¨¡å‹é©±åŠ¨å¼€å‘ (Model-Driven Development)

**ä¸€åˆ‡ä»æ¨¡å‹å¼€å§‹**ï¼š

```json
// src/models/article.model.json
{
  "name": "Article",
  "description": "åšå®¢æ–‡ç« ",
  "fields": [
    {
      "name": "id",
      "type": "integer",
      "primaryKey": true,
      "autoIncrement": true
    },
    {
      "name": "title",
      "type": "string",
      "required": true,
      "validation": { "min": 1, "max": 200 }
    }
  ]
}
```

**ä¸€é”®ç”Ÿæˆå…¨éƒ¨ä»£ç **ï¼š

```bash
pnpm run generate:model article
```

ç”Ÿæˆ 5 ä¸ªæ–‡ä»¶ + 2 ä¸ªè‡ªåŠ¨æ³¨å†Œ = **å®Œæ•´çš„ CRUD æ¨¡å—**

### 2. çº¦å®šä¼˜äºé…ç½® (Convention over Configuration)

**æ™ºèƒ½é»˜è®¤å€¼**ï¼Œåªéœ€é…ç½®å¿…è¦å­—æ®µï¼š

```json
{
  "name": "Product",
  "fields": [ /* ... */ ]
  // âœ… timestamps è‡ªåŠ¨æ·»åŠ  createdAt/updatedAt
  // âœ… api è‡ªåŠ¨é…ç½® 5 ä¸ª REST ç«¯ç‚¹
  // âœ… generate è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰ä»£ç 
}
```

### 3. é›¶é…ç½®æ³¨å†Œ (Zero-Configuration Registration)

**è‡ªåŠ¨æ³¨å†Œæœºåˆ¶**ï¼š

- âœ… Schema è‡ªåŠ¨å¯¼å‡ºåˆ° `db/schema/index.ts`
- âœ… Route è‡ªåŠ¨æ³¨å†Œåˆ° `router.ts`
- âœ… æ— éœ€æ‰‹åŠ¨ç»´æŠ¤å¯¼å…¥å¯¼å‡º

### 4. ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ (End-to-End Type Safety)

```
JSON Model â†’ Drizzle Schema â†’ TypeScript Types â†’ Valibot Validator â†’ API Response
     â†“            â†“                 â†“                   â†“                â†“
  å•ä¸€æ•°æ®æº    æ•°æ®åº“è¡¨          ç±»å‹æ¨å¯¼            è¿è¡Œæ—¶éªŒè¯        ç±»å‹åŒ–å“åº”
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
web-lite/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.ts                    # â­ Hono åº”ç”¨ä¸»å…¥å£
â”‚   â”œâ”€â”€ index.ts                  # â­ æœåŠ¡å™¨å¯åŠ¨æ–‡ä»¶
â”‚   â”œâ”€â”€ router.ts                 # â­ è·¯ç”±è‡ªåŠ¨æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ client.ts             # Drizzle å®¢æˆ·ç«¯å®ä¾‹
â”‚   â”‚   â””â”€â”€ schema/               # æ•°æ®åº“ Schema
â”‚   â”‚       â”œâ”€â”€ index.ts          # â­ Schema è‡ªåŠ¨æ³¨å†Œ
â”‚   â”‚       â”œâ”€â”€ auth.ts           # è®¤è¯ç›¸å…³è¡¨
â”‚   â”‚       â”œâ”€â”€ user.ts           # ç”¨æˆ·è¡¨
â”‚   â”‚       â”œâ”€â”€ product.ts        # å•†å“è¡¨
â”‚   â”‚       â”œâ”€â”€ category.ts       # åˆ†ç±»è¡¨
â”‚   â”‚       â””â”€â”€ order.ts          # è®¢å•è¡¨
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                   # â­â­â­ JSON æ¨¡å‹å®šä¹‰æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ types.ts              # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ schema.json           # JSON Schema éªŒè¯è§„åˆ™
â”‚   â”‚   â”œâ”€â”€ validator.ts          # æ¨¡å‹éªŒè¯å™¨
â”‚   â”‚   â”œâ”€â”€ loader.ts             # æ¨¡å‹åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ index.ts              # æ¨¡å‹æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ user.model.json       # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ product.model.json    # å•†å“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ category.model.json   # åˆ†ç±»æ¨¡å‹
â”‚   â”‚   â””â”€â”€ order.model.json      # è®¢å•æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                  # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/                 # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.repository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ auth.route.ts
â”‚   â”‚   â”œâ”€â”€ user/                 # ç”¨æˆ·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ product/              # å•†å“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ category/             # åˆ†ç±»æ¨¡å—
â”‚   â”‚   â””â”€â”€ order/                # è®¢å•æ¨¡å—
â”‚   â”‚
â”‚   â”œâ”€â”€ validators/               # Valibot æ ¡éªŒå™¨
â”‚   â”‚   â”œâ”€â”€ user.validator.ts
â”‚   â”‚   â”œâ”€â”€ product.validator.ts
â”‚   â”‚   â”œâ”€â”€ category.validator.ts
â”‚   â”‚   â””â”€â”€ order.validator.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ middlewares/              # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.ts               # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ jwt.ts                # JWT å·¥å…·
â”‚       â””â”€â”€ password.ts           # å¯†ç åŠ å¯†
â”‚
â”œâ”€â”€ scripts/                      # â­â­ ä»£ç ç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ model-generator.ts        # æ¨¡å‹ä»£ç ç”Ÿæˆå™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ generate-from-model.ts    # CLI å·¥å…·
â”‚   â””â”€â”€ route-register.ts         # è·¯ç”±æ³¨å†Œå·¥å…·
â”‚
â”œâ”€â”€ tests/                        # æµ‹è¯•
â”‚   â”œâ”€â”€ setup.ts
â”‚   â””â”€â”€ integration/
â”‚       â”œâ”€â”€ api.test.ts
â”‚       â””â”€â”€ auth.test.ts
â”‚
â”œâ”€â”€ docs/                         # â­ å®Œæ•´æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                 # æ–‡æ¡£ä¸­å¿ƒ
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md        # é¡¹ç›®æ€»ç»“
â”‚   â”œâ”€â”€ ARCHITECTURE.md           # æ¶æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ JSON_MODEL.md             # JSON æ¨¡å‹å®Œæ•´æŒ‡å—
â”‚   â”œâ”€â”€ JSON_MODEL_QUICKSTART.md  # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ JSON_MODEL_FIELD_CONFIG.md # å­—æ®µé…ç½®æŒ‡å—
â”‚   â”œâ”€â”€ CONVENTION_AND_CONFIGURATION.md # çº¦å®šå¼å¼€å‘
â”‚   â”œâ”€â”€ ROUTER.md                 # è·¯ç”±ç®¡ç†
â”‚   â”œâ”€â”€ DATABASE_SCHEMA.md        # æ•°æ®åº“è®¾è®¡
â”‚   â”œâ”€â”€ AUTH.md                   # è®¤è¯ç³»ç»Ÿ
â”‚   â”œâ”€â”€ TESTING.md                # æµ‹è¯•æŒ‡å—
â”‚   â””â”€â”€ DOCKER.md                 # Docker éƒ¨ç½²
â”‚
â”œâ”€â”€ coverage/                     # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
â”œâ”€â”€ docker-compose.yaml           # Docker Compose é…ç½®
â”œâ”€â”€ drizzle.config.ts             # Drizzle Kit é…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”œâ”€â”€ vitest.config.ts              # Vitest é…ç½®
â”œâ”€â”€ package.json                  # é¡¹ç›®é…ç½®
â”œâ”€â”€ pnpm-workspace.yaml           # pnpm å·¥ä½œåŒº
â””â”€â”€ .env                          # ç¯å¢ƒå˜é‡
```

### æ ¸å¿ƒç›®å½•è¯´æ˜

| ç›®å½•/æ–‡ä»¶ | èŒè´£ | æ˜¯å¦æ‰‹åŠ¨ç¼–è¾‘ |
|----------|------|-------------|
| `src/models/*.model.json` | â­ JSON æ¨¡å‹å®šä¹‰ | âœ… æ‰‹åŠ¨ |
| `scripts/model-generator.ts` | ä»£ç ç”Ÿæˆå™¨æ ¸å¿ƒ | âš ï¸ æ¡†æ¶ç»´æŠ¤ |
| `src/db/schema/index.ts` | Schema è‡ªåŠ¨æ³¨å†Œ | ğŸ¤– è‡ªåŠ¨ç”Ÿæˆ |
| `src/router.ts` | è·¯ç”±è‡ªåŠ¨æ³¨å†Œ | ğŸ¤– è‡ªåŠ¨ç”Ÿæˆ |
| `src/modules/*/` | ä¸šåŠ¡æ¨¡å—ä»£ç  | ğŸ¤– è‡ªåŠ¨ç”Ÿæˆï¼ˆå¯æ‰©å±•ï¼‰ |
| `src/validators/*.validator.ts` | æ•°æ®éªŒè¯å™¨ | ğŸ¤– è‡ªåŠ¨ç”Ÿæˆ |
| `src/middlewares/` | è‡ªå®šä¹‰ä¸­é—´ä»¶ | âœ… æ‰‹åŠ¨ |
| `src/utils/` | å·¥å…·å‡½æ•° | âœ… æ‰‹åŠ¨ |

---

## ğŸ›ï¸ åˆ†å±‚æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨ç»å…¸çš„**ä¸‰å±‚æ¶æ„æ¨¡å¼**ï¼Œæ¯å±‚èŒè´£æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæµ‹è¯•ã€‚

### æ¶æ„å±‚æ¬¡å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            HTTP Request                         â”‚
â”‚         (GET/POST/PUT/DELETE)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ¯ Route Layer (è·¯ç”±å±‚)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ–‡ä»¶: *.route.ts                          â”‚ â”‚
â”‚  â”‚ èŒè´£:                                     â”‚ â”‚
â”‚  â”‚  â€¢ æ¥æ”¶ HTTP è¯·æ±‚                         â”‚ â”‚
â”‚  â”‚  â€¢ ä½¿ç”¨ Valibot æ ¡éªŒå‚æ•°                  â”‚ â”‚
â”‚  â”‚  â€¢ è°ƒç”¨ Service å±‚                        â”‚ â”‚
â”‚  â”‚  â€¢ è¿”å› HTTP å“åº” (JSON)                  â”‚ â”‚
â”‚  â”‚  â€¢ é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ğŸ’¼ Service Layer (ä¸šåŠ¡é€»è¾‘å±‚)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ–‡ä»¶: *.service.ts                        â”‚ â”‚
â”‚  â”‚ èŒè´£:                                     â”‚ â”‚
â”‚  â”‚  â€¢ å¤„ç†ä¸šåŠ¡é€»è¾‘                           â”‚ â”‚
â”‚  â”‚  â€¢ æ•°æ®è½¬æ¢å’ŒéªŒè¯                         â”‚ â”‚
â”‚  â”‚  â€¢ è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ª Repository             â”‚ â”‚
â”‚  â”‚  â€¢ ä¸šåŠ¡è§„åˆ™éªŒè¯                           â”‚ â”‚
â”‚  â”‚  â€¢ äº‹åŠ¡ç®¡ç†                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ—„ï¸ Repository Layer (æ•°æ®è®¿é—®å±‚)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ–‡ä»¶: *.repository.ts                     â”‚ â”‚
â”‚  â”‚ èŒè´£:                                     â”‚ â”‚
â”‚  â”‚  â€¢ å°è£…æ•°æ®åº“æ“ä½œ                         â”‚ â”‚
â”‚  â”‚  â€¢ CRUD åŸºç¡€æ–¹æ³•                          â”‚ â”‚
â”‚  â”‚  â€¢ ä½¿ç”¨ Drizzle ORM                       â”‚ â”‚
â”‚  â”‚  â€¢ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘                         â”‚ â”‚
â”‚  â”‚  â€¢ å¯è¢«å¤šä¸ª Service å¤ç”¨                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ’¾ Database Layer (æ•°æ®åº“å±‚)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Drizzle Schema: db/schema/*.ts            â”‚ â”‚
â”‚  â”‚ PostgreSQL Database                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„å±‚è¯¦è§£

#### 1ï¸âƒ£ Repository å±‚ - æ•°æ®è®¿é—®

**ç‰¹ç‚¹**ï¼šçº¯ç²¹çš„æ•°æ®è®¿é—®ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘

```typescript
// src/modules/user/user.repository.ts
import { db } from '../../db/client';
import { user } from '../../db/schema';
import { eq } from 'drizzle-orm';

export class UserRepository {
  // è·å–æ‰€æœ‰ç”¨æˆ·
  async findAll() {
    return await db.select().from(user);
  }

  // æ ¹æ® ID æŸ¥æ‰¾ç”¨æˆ·
  async findById(id: number) {
    const result = await db
      .select()
      .from(user)
      .where(eq(user.id, id));
    return result[0] || null;
  }

  // æ ¹æ®é‚®ç®±æŸ¥æ‰¾ç”¨æˆ·
  async findByEmail(email: string) {
    const result = await db
      .select()
      .from(user)
      .where(eq(user.email, email));
    return result[0] || null;
  }

  // åˆ›å»ºç”¨æˆ·
  async create(data: typeof user.$inferInsert) {
    const result = await db
      .insert(user)
      .values(data)
      .returning();
    return result[0];
  }

  // æ›´æ–°ç”¨æˆ·
  async update(id: number, data: Partial<typeof user.$inferInsert>) {
    const result = await db
      .update(user)
      .set(data)
      .where(eq(user.id, id))
      .returning();
    return result[0] || null;
  }

  // åˆ é™¤ç”¨æˆ·
  async delete(id: number) {
    const result = await db
      .delete(user)
      .where(eq(user.id, id))
      .returning();
    return result[0] || null;
  }
}
```

**èŒè´£è¾¹ç•Œ**ï¼š
- âœ… æ•°æ®åº“ CRUD æ“ä½œ
- âœ… ç®€å•çš„æŸ¥è¯¢æ¡ä»¶
- âœ… è¿”å›åŸå§‹æ•°æ®
- âŒ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- âŒ ä¸åšæ•°æ®éªŒè¯
- âŒ ä¸å¤„ç†å¼‚å¸¸ï¼ˆè®©ä¸Šå±‚å¤„ç†ï¼‰

#### 2ï¸âƒ£ Service å±‚ - ä¸šåŠ¡é€»è¾‘

**ç‰¹ç‚¹**ï¼šåŒ…å«ä¸šåŠ¡è§„åˆ™å’ŒéªŒè¯

```typescript
// src/modules/user/user.service.ts
import { UserRepository } from './user.repository';
import { hashPassword } from '../../utils/password';

export class UserService {
  private repository = new UserRepository();

  // è·å–æ‰€æœ‰ç”¨æˆ·ï¼ˆä¸è¿”å›å¯†ç ï¼‰
  async getAll() {
    const users = await this.repository.findAll();
    return users.map(({ password, ...user }) => user);
  }

  // è·å–å•ä¸ªç”¨æˆ·
  async getById(id: number) {
    const user = await this.repository.findById(id);

    // ä¸šåŠ¡éªŒè¯ï¼šç”¨æˆ·ä¸å­˜åœ¨
    if (!user) {
      throw new Error('User not found');
    }

    // ä¸è¿”å›å¯†ç 
    const { password, ...userWithoutPassword } = user;
    return userWithoutPassword;
  }

  // åˆ›å»ºç”¨æˆ·
  async create(data: { username: string; email: string; password: string }) {
    // ä¸šåŠ¡éªŒè¯ï¼šé‚®ç®±æ˜¯å¦å·²å­˜åœ¨
    const existingUser = await this.repository.findByEmail(data.email);
    if (existingUser) {
      throw new Error('Email already exists');
    }

    // ä¸šåŠ¡é€»è¾‘ï¼šå¯†ç åŠ å¯†
    const hashedPassword = await hashPassword(data.password);

    // è°ƒç”¨ Repository
    const user = await this.repository.create({
      ...data,
      password: hashedPassword,
    });

    // ä¸è¿”å›å¯†ç 
    const { password, ...userWithoutPassword } = user;
    return userWithoutPassword;
  }

  // æ›´æ–°ç”¨æˆ·
  async update(id: number, data: Partial<{ username: string; email: string }>) {
    // ä¸šåŠ¡éªŒè¯ï¼šç”¨æˆ·æ˜¯å¦å­˜åœ¨
    const existingUser = await this.repository.findById(id);
    if (!existingUser) {
      throw new Error('User not found');
    }

    // ä¸šåŠ¡éªŒè¯ï¼šé‚®ç®±æ˜¯å¦è¢«å ç”¨
    if (data.email) {
      const emailUser = await this.repository.findByEmail(data.email);
      if (emailUser && emailUser.id !== id) {
        throw new Error('Email already exists');
      }
    }

    const user = await this.repository.update(id, data);
    if (!user) {
      throw new Error('Update failed');
    }

    const { password, ...userWithoutPassword } = user;
    return userWithoutPassword;
  }

  // åˆ é™¤ç”¨æˆ·
  async delete(id: number) {
    const user = await this.repository.findById(id);
    if (!user) {
      throw new Error('User not found');
    }

    return await this.repository.delete(id);
  }
}
```

**èŒè´£è¾¹ç•Œ**ï¼š
- âœ… ä¸šåŠ¡è§„åˆ™éªŒè¯
- âœ… æ•°æ®è½¬æ¢ï¼ˆå¦‚å¯†ç åŠ å¯†ï¼‰
- âœ… è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ª Repository
- âœ… å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘
- âœ… æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
- âŒ ä¸ç›´æ¥æ“ä½œæ•°æ®åº“
- âŒ ä¸å¤„ç† HTTP ç›¸å…³é€»è¾‘

#### 3ï¸âƒ£ Route å±‚ - HTTP å¤„ç†

**ç‰¹ç‚¹**ï¼šå¤„ç† HTTP è¯·æ±‚å’Œå“åº”

```typescript
// src/modules/user/user.route.ts
import { Hono } from 'hono';
import { valibot } from '@hono/valibot-validator';
import { UserService } from './user.service';
import {
  createUserSchema,
  updateUserSchema,
} from '../../validators/user.validator';

const route = new Hono();
const service = new UserService();

// è·å–æ‰€æœ‰ç”¨æˆ·
route.get('/', async (c) => {
  const users = await service.getAll();
  return c.json(users);
});

// è·å–å•ä¸ªç”¨æˆ·
route.get('/:id', async (c) => {
  const id = Number(c.req.param('id'));

  if (isNaN(id)) {
    return c.json({ error: 'Invalid ID' }, 400);
  }

  try {
    const user = await service.getById(id);
    return c.json(user);
  } catch (error) {
    return c.json({ error: (error as Error).message }, 404);
  }
});

// åˆ›å»ºç”¨æˆ·ï¼ˆå¸¦ Valibot éªŒè¯ï¼‰
route.post('/', valibot('json', createUserSchema), async (c) => {
  const body = c.req.valid('json'); // å·²é€šè¿‡éªŒè¯çš„æ•°æ®

  try {
    const user = await service.create(body);
    return c.json(user, 201);
  } catch (error) {
    return c.json({ error: (error as Error).message }, 400);
  }
});

// æ›´æ–°ç”¨æˆ·ï¼ˆå¸¦ Valibot éªŒè¯ï¼‰
route.put('/:id', valibot('json', updateUserSchema), async (c) => {
  const id = Number(c.req.param('id'));
  const body = c.req.valid('json');

  if (isNaN(id)) {
    return c.json({ error: 'Invalid ID' }, 400);
  }

  try {
    const user = await service.update(id, body);
    return c.json(user);
  } catch (error) {
    return c.json({ error: (error as Error).message }, 400);
  }
});

// åˆ é™¤ç”¨æˆ·
route.delete('/:id', async (c) => {
  const id = Number(c.req.param('id'));

  if (isNaN(id)) {
    return c.json({ error: 'Invalid ID' }, 400);
  }

  try {
    await service.delete(id);
    return c.json({ message: 'User deleted successfully' });
  } catch (error) {
    return c.json({ error: (error as Error).message }, 404);
  }
});

export { route as userRoute };
```

**èŒè´£è¾¹ç•Œ**ï¼š
- âœ… æ¥æ”¶å’Œè§£æ HTTP è¯·æ±‚
- âœ… å‚æ•°éªŒè¯ï¼ˆValibotï¼‰
- âœ… è°ƒç”¨ Service å±‚
- âœ… è¿”å› HTTP å“åº”
- âœ… HTTP çŠ¶æ€ç å¤„ç†
- âœ… é”™è¯¯å“åº”æ ¼å¼åŒ–
- âŒ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- âŒ ä¸ç›´æ¥æ“ä½œæ•°æ®åº“

### åˆ†å±‚ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| ğŸ¯ **èŒè´£æ¸…æ™°** | æ¯å±‚åªå…³æ³¨è‡ªå·±çš„èŒè´£ |
| ğŸ§ª **æ˜“äºæµ‹è¯•** | æ¯å±‚å¯ç‹¬ç«‹æµ‹è¯• |
| ğŸ”„ **æ˜“äºå¤ç”¨** | Repository å¯è¢«å¤šä¸ª Service å¤ç”¨ |
| ğŸ› ï¸ **æ˜“äºç»´æŠ¤** | ä¿®æ”¹æŸå±‚ä¸å½±å“å…¶ä»–å±‚ |
| ğŸ“ˆ **æ˜“äºæ‰©å±•** | æ–°å¢åŠŸèƒ½åªéœ€æ‰©å±•å¯¹åº”å±‚ |

---

## ğŸ”„ æ•°æ®æµè½¬

### å®Œæ•´è¯·æ±‚æµç¨‹ç¤ºä¾‹

ä»¥**åˆ›å»ºç”¨æˆ·**ä¸ºä¾‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. HTTP Request                                              â”‚
â”‚    POST /user                                                â”‚
â”‚    Body: {                                                   â”‚
â”‚      "username": "zhangsan",                                 â”‚
â”‚      "email": "zhangsan@example.com",                        â”‚
â”‚      "password": "123456"                                    â”‚
â”‚    }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Route Layer (user.route.ts)                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ âœ“ è§£æè¯·æ±‚ä½“                                         â”‚  â”‚
â”‚    â”‚ âœ“ Valibot éªŒè¯: createUserSchema                    â”‚  â”‚
â”‚    â”‚   - username: string (3-50 å­—ç¬¦)                    â”‚  â”‚
â”‚    â”‚   - email: email æ ¼å¼                                â”‚  â”‚
â”‚    â”‚   - password: string (6+ å­—ç¬¦)                      â”‚  â”‚
â”‚    â”‚ âœ“ éªŒè¯é€šè¿‡ï¼Œè°ƒç”¨: service.create(body)              â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Service Layer (user.service.ts)                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ ä¸šåŠ¡é€»è¾‘å¤„ç†:                                        â”‚  â”‚
â”‚    â”‚ âœ“ æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨                                â”‚  â”‚
â”‚    â”‚   â†’ repository.findByEmail(email)                   â”‚  â”‚
â”‚    â”‚   â†’ å¦‚æœå­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸: "Email already exists"      â”‚  â”‚
â”‚    â”‚                                                      â”‚  â”‚
â”‚    â”‚ âœ“ å¯†ç åŠ å¯†                                           â”‚  â”‚
â”‚    â”‚   â†’ hashedPassword = await hashPassword(password)   â”‚  â”‚
â”‚    â”‚                                                      â”‚  â”‚
â”‚    â”‚ âœ“ è°ƒç”¨ Repository åˆ›å»ºç”¨æˆ·                          â”‚  â”‚
â”‚    â”‚   â†’ user = repository.create({                      â”‚  â”‚
â”‚    â”‚        username,                                     â”‚  â”‚
â”‚    â”‚        email,                                        â”‚  â”‚
â”‚    â”‚        password: hashedPassword                      â”‚  â”‚
â”‚    â”‚      })                                              â”‚  â”‚
â”‚    â”‚                                                      â”‚  â”‚
â”‚    â”‚ âœ“ ç§»é™¤å¯†ç å­—æ®µ                                       â”‚  â”‚
â”‚    â”‚   â†’ return { id, username, email, ... }             â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Repository Layer (user.repository.ts)                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ æ•°æ®åº“æ“ä½œ:                                          â”‚  â”‚
â”‚    â”‚ âœ“ ä½¿ç”¨ Drizzle ORM                                  â”‚  â”‚
â”‚    â”‚   â†’ const result = await db                         â”‚  â”‚
â”‚    â”‚        .insert(user)                                 â”‚  â”‚
â”‚    â”‚        .values({                                     â”‚  â”‚
â”‚    â”‚          username: 'zhangsan',                       â”‚  â”‚
â”‚    â”‚          email: 'zhangsan@example.com',              â”‚  â”‚
â”‚    â”‚          password: '$2b$10$...',                     â”‚  â”‚
â”‚    â”‚          createdAt: new Date(),                      â”‚  â”‚
â”‚    â”‚          updatedAt: new Date()                       â”‚  â”‚
â”‚    â”‚        })                                            â”‚  â”‚
â”‚    â”‚        .returning()                                  â”‚  â”‚
â”‚    â”‚                                                      â”‚  â”‚
â”‚    â”‚ âœ“ è¿”å›æ’å…¥çš„è®°å½•                                     â”‚  â”‚
â”‚    â”‚   â†’ return result[0]                                â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Database (PostgreSQL)                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ INSERT INTO "user" (                                 â”‚  â”‚
â”‚    â”‚   username, email, password,                         â”‚  â”‚
â”‚    â”‚   created_at, updated_at                             â”‚  â”‚
â”‚    â”‚ ) VALUES (                                           â”‚  â”‚
â”‚    â”‚   'zhangsan',                                        â”‚  â”‚
â”‚    â”‚   'zhangsan@example.com',                            â”‚  â”‚
â”‚    â”‚   '$2b$10$...',                                      â”‚  â”‚
â”‚    â”‚   '2025-01-12 10:00:00',                             â”‚  â”‚
â”‚    â”‚   '2025-01-12 10:00:00'                              â”‚  â”‚
â”‚    â”‚ ) RETURNING *;                                       â”‚  â”‚
â”‚    â”‚                                                      â”‚  â”‚
â”‚    â”‚ âœ“ è®°å½•æ’å…¥æˆåŠŸ                                       â”‚  â”‚
â”‚    â”‚ âœ“ è¿”å›å®Œæ•´è®°å½•ï¼ˆåŒ…å«è‡ªå¢ IDï¼‰                       â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼ (æ•°æ®åŸè·¯è¿”å›)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repository â†’ Service â†’ Route                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. HTTP Response                                             â”‚
â”‚    Status: 201 Created                                       â”‚
â”‚    Body: {                                                   â”‚
â”‚      "id": 1,                                                â”‚
â”‚      "username": "zhangsan",                                 â”‚
â”‚      "email": "zhangsan@example.com",                        â”‚
â”‚      "role": "user",                                         â”‚
â”‚      "createdAt": "2025-01-12T10:00:00.000Z",                â”‚
â”‚      "updatedAt": "2025-01-12T10:00:00.000Z"                 â”‚
â”‚    }                                                         â”‚
â”‚    æ³¨æ„: password å­—æ®µå·²è¢« Service å±‚ç§»é™¤                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é”™è¯¯å¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é”™è¯¯å‘ç”Ÿ                                  â”‚
â”‚ (å¦‚: é‚®ç®±å·²å­˜åœ¨)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service å±‚æŠ›å‡ºå¼‚å¸¸                        â”‚
â”‚ throw new Error('Email already exists')  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Route å±‚æ•è·å¼‚å¸¸                          â”‚
â”‚ catch (error) {                          â”‚
â”‚   return c.json(                         â”‚
â”‚     { error: error.message },            â”‚
â”‚     400                                  â”‚
â”‚   )                                      â”‚
â”‚ }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›é”™è¯¯å“åº”                              â”‚
â”‚ Status: 400 Bad Request                  â”‚
â”‚ Body: {                                  â”‚
â”‚   "error": "Email already exists"        â”‚
â”‚ }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ä¹Ÿå¯ä»¥ä½¿ç”¨å…¨å±€é”™è¯¯å¤„ç†å™¨ï¼š

```typescript
// src/app.ts
app.onError((err, c) => {
  console.error('Error:', err);
  return c.json(
    {
      error: err.message || 'Internal Server Error',
    },
    500
  );
});
```

---

## ğŸš€ æ¨¡å‹é©±åŠ¨å¼€å‘

---

## ğŸš€ æ¨¡å‹é©±åŠ¨å¼€å‘

### å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: åˆ›å»º JSON æ¨¡å‹å®šä¹‰              â”‚
â”‚  src/models/article.model.json          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: è¿è¡Œä»£ç ç”Ÿæˆå‘½ä»¤                â”‚
â”‚  pnpm run generate:model article        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: è‡ªåŠ¨ç”Ÿæˆä»£ç                     â”‚
â”‚  âœ“ Schema                               â”‚
â”‚  âœ“ Validator                            â”‚
â”‚  âœ“ Repository                           â”‚
â”‚  âœ“ Service                              â”‚
â”‚  âœ“ Route                                â”‚
â”‚  âœ“ è‡ªåŠ¨æ³¨å†Œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: æ›´æ–°æ•°æ®åº“                      â”‚
â”‚  pnpm run db:push                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… å®Œæˆï¼API å·²å¯ç”¨                     â”‚
â”‚  GET/POST/PUT/DELETE /article           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JSON æ¨¡å‹ç¤ºä¾‹

```json
{
  "name": "Article",
  "description": "åšå®¢æ–‡ç« ",
  "fields": [
    {
      "name": "id",
      "type": "integer",
      "primaryKey": true,
      "autoIncrement": true,
      "description": "æ–‡ç« ID"
    },
    {
      "name": "title",
      "type": "string",
      "length": 200,
      "required": true,
      "validation": {
        "min": 1,
        "max": 200
      },
      "description": "æ–‡ç« æ ‡é¢˜"
    },
    {
      "name": "content",
      "type": "text",
      "required": true,
      "description": "æ–‡ç« å†…å®¹"
    },
    {
      "name": "status",
      "type": "string",
      "length": 20,
      "default": "draft",
      "validation": {
        "enum": ["draft", "published", "archived"]
      },
      "description": "å‘å¸ƒçŠ¶æ€"
    },
    {
      "name": "authorId",
      "type": "integer",
      "required": true,
      "reference": {
        "table": "users",
        "field": "id",
        "onDelete": "cascade"
      },
      "description": "ä½œè€…ID"
    },
    {
      "name": "viewCount",
      "type": "integer",
      "default": 0,
      "description": "æµè§ˆæ¬¡æ•°"
    }
  ],
  "indexes": [
    {
      "name": "idx_article_author",
      "fields": ["authorId"]
    },
    {
      "name": "idx_article_status",
      "fields": ["status"]
    }
  ]
}
```

**æ™ºèƒ½é»˜è®¤å€¼**ï¼š
- âœ… `timestamps.createdAt` å’Œ `timestamps.updatedAt` è‡ªåŠ¨æ·»åŠ 
- âœ… `api` è‡ªåŠ¨é…ç½® list/get/create/update/delete ç«¯ç‚¹
- âœ… `generate` è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰ä»£ç æ–‡ä»¶

### ç”Ÿæˆçš„ä»£ç ç»“æ„

è¿è¡Œ `pnpm run generate:model article` åï¼š

```
ç”Ÿæˆçš„æ–‡ä»¶:
â”œâ”€â”€ src/db/schema/article.ts          âœ… Drizzle Schema
â”œâ”€â”€ src/validators/article.validator.ts âœ… Valibot Validator
â”œâ”€â”€ src/modules/article/
â”‚   â”œâ”€â”€ index.ts                      âœ… æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ article.repository.ts         âœ… Repository
â”‚   â”œâ”€â”€ article.service.ts            âœ… Service
â”‚   â””â”€â”€ article.route.ts              âœ… Route

è‡ªåŠ¨æ›´æ–°çš„æ–‡ä»¶:
â”œâ”€â”€ src/db/schema/index.ts            ğŸ¤– è‡ªåŠ¨æ·»åŠ  export
â””â”€â”€ src/router.ts                     ğŸ¤– è‡ªåŠ¨æ³¨å†Œè·¯ç”±
```

---

## ğŸ”— è‡ªåŠ¨åŒ–æ³¨å†Œæœºåˆ¶

### 1. Schema è‡ªåŠ¨æ³¨å†Œ

ç”Ÿæˆ Schema åï¼Œè‡ªåŠ¨æ·»åŠ åˆ° `src/db/schema/index.ts`ï¼š

```typescript
// ========== AUTO-REGISTER START ==========
export * from './auth';
export * from './category';
export * from './order';
export * from './product';
export * from './user';
export * from './article';  // ğŸ¤– è‡ªåŠ¨æ·»åŠ 
// ========== AUTO-REGISTER END ==========
```

**å·¥ä½œåŸç†**ï¼š

ä»£ç ç”Ÿæˆå™¨ä¼šï¼š
1. æ£€æµ‹ `AUTO-REGISTER START/END` æ ‡è®°
2. åœ¨è¯¥åŒºåŸŸå†…æŒ‰å­—æ¯é¡ºåºæ’å…¥æ–°çš„ export
3. ä¿æŒåŒºåŸŸå¤–çš„ä»£ç ä¸å˜

### 2. Route è‡ªåŠ¨æ³¨å†Œ

ç”Ÿæˆ Route åï¼Œè‡ªåŠ¨æ·»åŠ åˆ° `src/router.ts`ï¼š

```typescript
// ========== AUTO-REGISTER START ==========
import { authRoute } from './modules/auth';
import { categoryRoute } from './modules/category';
import { orderRoute } from './modules/order';
import { productRoute } from './modules/product';
import { userRoute } from './modules/user';
import { articleRoute } from './modules/article';  // ğŸ¤– è‡ªåŠ¨æ·»åŠ 

// æ³¨å†Œè·¯ç”±
router.route('/auth', authRoute);
router.route('/category', categoryRoute);
router.route('/order', orderRoute);
router.route('/product', productRoute);
router.route('/user', userRoute);
router.route('/article', articleRoute);  // ğŸ¤– è‡ªåŠ¨æ·»åŠ 
// ========== AUTO-REGISTER END ==========
```

**ä¼˜åŠ¿**ï¼š
- âœ… é›¶é…ç½® - æ— éœ€æ‰‹åŠ¨ç»´æŠ¤å¯¼å…¥å¯¼å‡º
- âœ… è‡ªåŠ¨æ’åº - ä¿æŒä»£ç æ•´æ´
- âœ… é˜²å†²çª - æ£€æµ‹é‡å¤æ³¨å†Œ
- âœ… å®‰å…¨æ›´æ–° - åªä¿®æ”¹æ ‡è®°åŒºåŸŸ

### 3. æ¨¡å‹åŠ è½½æœºåˆ¶

#### çº¦å®šå¼åŠ è½½ï¼ˆæ¨èï¼‰

è‡ªåŠ¨æ‰«æ `src/models/*.model.json`ï¼š

```typescript
// src/models/loader.ts
const models = loadModelsSync();  // åŠ è½½æ‰€æœ‰æ¨¡å‹
```

#### é…ç½®å¼åŠ è½½

åªåŠ è½½æŒ‡å®šæ¨¡å‹ï¼š

```typescript
const models = loadModelsSync({
  user: true,
  product: true,
  article: true,
  // category: false,  // ä¸åŠ è½½
  // order: false,     // ä¸åŠ è½½
});
```

---

## ğŸ›¡ï¸ ç±»å‹å®‰å…¨ä½“ç³»

### ç«¯åˆ°ç«¯ç±»å‹æµ

```
JSON Model
   â†“
Drizzle Schema (pgTable)
   â†“
TypeScript Types ($inferSelect / $inferInsert)
   â†“
Valibot Validator (Runtime Validation)
   â†“
API Response (Type-safe)
```

### ç¤ºä¾‹ï¼šä»æ¨¡å‹åˆ° API

#### 1. JSON æ¨¡å‹å®šä¹‰

```json
{
  "name": "Product",
  "fields": [
    {
      "name": "id",
      "type": "integer",
      "primaryKey": true,
      "autoIncrement": true
    },
    {
      "name": "name",
      "type": "string",
      "length": 100,
      "required": true
    },
    {
      "name": "price",
      "type": "decimal",
      "precision": 10,
      "scale": 2,
      "required": true
    }
  ]
}
```

#### 2. ç”Ÿæˆ Drizzle Schema

```typescript
// src/db/schema/product.ts
import { pgTable, serial, varchar, decimal } from 'drizzle-orm/pg-core';

export const product = pgTable('product', {
  id: serial('id').primaryKey(),
  name: varchar('name', { length: 100 }).notNull(),
  price: decimal('price', { precision: 10, scale: 2 }).notNull(),
  createdAt: timestamp('created_at').notNull().defaultNow(),
  updatedAt: timestamp('updated_at').notNull().defaultNow(),
});
```

#### 3. ç±»å‹æ¨å¯¼

```typescript
// è‡ªåŠ¨æ¨å¯¼ç±»å‹
type Product = typeof product.$inferSelect;
// {
//   id: number;
//   name: string;
//   price: string;  // decimal ç±»å‹ä¸º string
//   createdAt: Date;
//   updatedAt: Date;
// }

type InsertProduct = typeof product.$inferInsert;
// {
//   id?: number;
//   name: string;
//   price: string;
//   createdAt?: Date;
//   updatedAt?: Date;
// }
```

#### 4. ç”Ÿæˆ Valibot Validator

```typescript
// src/validators/product.validator.ts
import * as v from 'valibot';

export const createProductSchema = v.object({
  name: v.pipe(v.string(), v.minLength(1), v.maxLength(100)),
  price: v.pipe(
    v.string(),
    v.regex(/^\d+(\.\d{1,2})?$/)  // æ ¹æ® scale: 2 è‡ªåŠ¨ç”Ÿæˆ
  ),
});

export const updateProductSchema = v.partial(createProductSchema);
```

#### 5. Repository ä½¿ç”¨ç±»å‹

```typescript
// src/modules/product/product.repository.ts
export class ProductRepository {
  async create(data: typeof product.$inferInsert) {
    const result = await db
      .insert(product)
      .values(data)
      .returning();
    return result[0];
  }

  async findById(id: number): Promise<typeof product.$inferSelect | null> {
    const result = await db
      .select()
      .from(product)
      .where(eq(product.id, id));
    return result[0] || null;
  }
}
```

#### 6. Service ä½¿ç”¨ç±»å‹

```typescript
// src/modules/product/product.service.ts
import { ProductRepository } from './product.repository';

export class ProductService {
  private repository = new ProductRepository();

  async create(data: { name: string; price: string }) {
    // ç±»å‹å®‰å…¨çš„æ•°æ®ä¼ é€’
    return await this.repository.create(data);
  }

  async getById(id: number) {
    const product = await this.repository.findById(id);
    if (!product) {
      throw new Error('Product not found');
    }
    return product;  // ç±»å‹: typeof product.$inferSelect
  }
}
```

#### 7. Route ä½¿ç”¨ Validator

```typescript
// src/modules/product/product.route.ts
import { valibot } from '@hono/valibot-validator';
import { createProductSchema } from '../../validators/product.validator';

route.post('/', valibot('json', createProductSchema), async (c) => {
  const body = c.req.valid('json');
  // body çš„ç±»å‹ç”± Valibot è‡ªåŠ¨æ¨å¯¼
  // { name: string; price: string }

  const product = await service.create(body);
  return c.json(product);  // ç±»å‹å®‰å…¨çš„å“åº”
});
```

### ç±»å‹å®‰å…¨çš„å¥½å¤„

| åœºæ™¯ | ç±»å‹å®‰å…¨ä¿æŠ¤ |
|------|-------------|
| ğŸ”§ **ç¼–å†™ä»£ç ** | IDE è‡ªåŠ¨è¡¥å…¨ï¼Œå‡å°‘æ‹¼å†™é”™è¯¯ |
| âœ… **ç¼–è¯‘æ—¶** | TypeScript æ£€æµ‹ç±»å‹é”™è¯¯ |
| ğŸ” **è¿è¡Œæ—¶** | Valibot éªŒè¯æ•°æ®æ ¼å¼ |
| ğŸ›¡ï¸ **é‡æ„** | ä¿®æ”¹å­—æ®µè‡ªåŠ¨æç¤ºç›¸å…³ä»£ç  |
| ğŸ“ **æ–‡æ¡£** | ç±»å‹å³æ–‡æ¡£ï¼Œæ— éœ€é¢å¤–ç»´æŠ¤ |

---

## âš™ï¸ ä»£ç ç”Ÿæˆæµç¨‹

### ç”Ÿæˆå™¨æ¶æ„

```typescript
// scripts/model-generator.ts

/**
 * 1. è§£ææ¨¡å‹
 */
function parseModel(modelPath: string): ModelDefinition {
  const content = fs.readFileSync(modelPath, 'utf-8');
  const modelData = JSON.parse(content);

  // åº”ç”¨é»˜è®¤å€¼
  const modelWithDefaults = applyDefaults(modelData);

  // éªŒè¯æ¨¡å‹
  const { valid, errors, model } = validateModel(modelWithDefaults);

  if (!valid) {
    throw new Error(`Invalid model: ${errors}`);
  }

  return model!;
}

/**
 * 2. ç”Ÿæˆ Schema
 */
function generateSchema(model: ModelDefinition): string {
  const imports = generateImports(model);
  const tableDef = generateTableDefinition(model);
  const indexes = generateIndexes(model);

  return `${imports}\n\n${tableDef}\n\n${indexes}`;
}

/**
 * 3. ç”Ÿæˆ Validator
 */
function generateValidator(model: ModelDefinition): string {
  const createSchema = generateCreateSchema(model);
  const updateSchema = generateUpdateSchema(model);

  return `import * as v from 'valibot';\n\n${createSchema}\n\n${updateSchema}`;
}

/**
 * 4. ç”Ÿæˆ Repository
 */
function generateRepository(model: ModelDefinition): string {
  // æ ¹æ®æ¨¡æ¿ç”Ÿæˆ Repository ä»£ç 
}

/**
 * 5. ç”Ÿæˆ Service
 */
function generateService(model: ModelDefinition): string {
  // æ ¹æ®æ¨¡æ¿ç”Ÿæˆ Service ä»£ç 
}

/**
 * 6. ç”Ÿæˆ Route
 */
function generateRoute(model: ModelDefinition): string {
  // æ ¹æ® API é…ç½®ç”Ÿæˆ Route ä»£ç 
}

/**
 * 7. è‡ªåŠ¨æ³¨å†Œ
 */
function autoRegister(modelName: string) {
  // æ³¨å†Œåˆ° schema/index.ts
  registerSchema(modelName);

  // æ³¨å†Œåˆ° router.ts
  registerRoute(modelName);
}
```

### ç”Ÿæˆæ­¥éª¤è¯¦è§£

#### Step 1: è¯»å–å’ŒéªŒè¯æ¨¡å‹

```typescript
// 1. è¯»å– JSON æ–‡ä»¶
const modelPath = `src/models/${modelName}.model.json`;
const content = fs.readFileSync(modelPath, 'utf-8');
const rawModel = JSON.parse(content);

// 2. åº”ç”¨é»˜è®¤å€¼
const model = applyDefaults(rawModel);
// {
//   name: "Article",
//   fields: [...],
//   timestamps: { createdAt: true, updatedAt: true },  // è‡ªåŠ¨æ·»åŠ 
//   api: { list: {...}, get: {...}, ... },             // è‡ªåŠ¨æ·»åŠ 
//   generate: { schema: true, validator: true, ... }   // è‡ªåŠ¨æ·»åŠ 
// }

// 3. JSON Schema éªŒè¯
const { valid, errors } = validateModel(model);
if (!valid) {
  throw new Error(`Model validation failed: ${errors}`);
}
```

#### Step 2: ç”Ÿæˆ Drizzle Schema

```typescript
function generateSchema(model: ModelDefinition): string {
  let code = `import { pgTable`;

  // æ”¶é›†éœ€è¦çš„ Drizzle å¯¼å…¥
  const imports = new Set<string>();
  model.fields.forEach(field => {
    if (field.type === 'integer') imports.add('serial');
    if (field.type === 'string') imports.add('varchar');
    // ...
  });

  code += `, ${Array.from(imports).join(', ')} } from 'drizzle-orm/pg-core';\n\n`;

  // ç”Ÿæˆè¡¨å®šä¹‰
  code += `export const ${camelCase(model.name)} = pgTable('${snakeCase(model.name)}', {\n`;

  model.fields.forEach(field => {
    code += `  ${field.name}: ${fieldTypeToDrizzle(field)},\n`;
  });

  // æ·»åŠ æ—¶é—´æˆ³
  if (model.timestamps.createdAt) {
    code += `  createdAt: timestamp('created_at').notNull().defaultNow(),\n`;
  }
  if (model.timestamps.updatedAt) {
    code += `  updatedAt: timestamp('updated_at').notNull().defaultNow(),\n`;
  }

  code += `});\n`;

  return code;
}
```

#### Step 3: ç”Ÿæˆ Valibot Validator

```typescript
function generateValidator(model: ModelDefinition): string {
  let code = `import * as v from 'valibot';\n\n`;

  // ç”Ÿæˆ create schema
  code += `export const create${pascalCase(model.name)}Schema = v.object({\n`;

  model.fields.forEach(field => {
    if (field.primaryKey || field.autoIncrement) return;  // è·³è¿‡ä¸»é”®

    code += `  ${field.name}: `;

    // æ ¹æ®éªŒè¯è§„åˆ™ç”Ÿæˆ
    if (field.validation?.email) {
      code += `v.pipe(v.string(), v.email())`;
    } else if (field.validation?.url) {
      code += `v.pipe(v.string(), v.url())`;
    } else if (field.validation?.enum) {
      code += `v.picklist([${field.validation.enum.map(v => `'${v}'`).join(', ')}])`;
    } else if (field.type === 'string') {
      const validators = ['v.string()'];
      if (field.validation?.min) validators.push(`v.minLength(${field.validation.min})`);
      if (field.validation?.max) validators.push(`v.maxLength(${field.validation.max})`);
      code += `v.pipe(${validators.join(', ')})`;
    }

    if (!field.required) {
      code += `.optional()`;
    }

    code += `,\n`;
  });

  code += `});\n\n`;

  // ç”Ÿæˆ update schemaï¼ˆæ‰€æœ‰å­—æ®µå¯é€‰ï¼‰
  code += `export const update${pascalCase(model.name)}Schema = v.partial(create${pascalCase(model.name)}Schema);\n`;

  return code;
}
```

#### Step 4-6: ç”Ÿæˆ Repository/Service/Route

ä½¿ç”¨æ¨¡æ¿ç”Ÿæˆï¼Œæ ¹æ®æ¨¡å‹é…ç½®åŠ¨æ€è°ƒæ•´ã€‚

#### Step 7: è‡ªåŠ¨æ³¨å†Œ

```typescript
function registerSchema(modelName: string) {
  const indexPath = 'src/db/schema/index.ts';
  let content = fs.readFileSync(indexPath, 'utf-8');

  // æŸ¥æ‰¾ AUTO-REGISTER åŒºåŸŸ
  const startMarker = '// ========== AUTO-REGISTER START ==========';
  const endMarker = '// ========== AUTO-REGISTER END ==========';

  const start = content.indexOf(startMarker) + startMarker.length;
  const end = content.indexOf(endMarker);

  // æå–ç°æœ‰ exports
  const existingExports = content
    .substring(start, end)
    .split('\n')
    .filter(line => line.includes('export *'))
    .map(line => line.trim());

  // æ·»åŠ æ–° export
  const newExport = `export * from './${modelName}';`;
  if (!existingExports.includes(newExport)) {
    existingExports.push(newExport);
  }

  // æ’åºå¹¶é‡æ–°ç»„è£…
  existingExports.sort();
  const newSection = `\n${existingExports.join('\n')}\n`;

  // æ›¿æ¢å†…å®¹
  content = content.substring(0, start) + newSection + content.substring(end);

  fs.writeFileSync(indexPath, content);
}
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|------|
| **Node.js** | 20+ | è¿è¡Œæ—¶ | JavaScript è¿è¡Œç¯å¢ƒ |
| **TypeScript** | 5.9+ | è¯­è¨€ | ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›† |
| **Hono** | 4.10+ | Web æ¡†æ¶ | è¶…å¿«é€Ÿè½»é‡çº§ Web æ¡†æ¶ |
| **Drizzle ORM** | 0.44+ | ORM | ç±»å‹å®‰å…¨çš„ ORM |
| **PostgreSQL** | 16+ | æ•°æ®åº“ | å…³ç³»å‹æ•°æ®åº“ |
| **Valibot** | 1.1+ | éªŒè¯ | è½»é‡çº§ Schema éªŒè¯åº“ |

### å¼€å‘å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| **tsx** | TypeScript æ‰§è¡Œå™¨ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰ |
| **Drizzle Kit** | æ•°æ®åº“è¿ç§»å·¥å…· |
| **Vitest** | å•å…ƒæµ‹è¯•æ¡†æ¶ |
| **Ajv** | JSON Schema éªŒè¯å™¨ |
| **change-case** | å‘½åè½¬æ¢å·¥å…· |
| **pluralize** | å•å¤æ•°è½¬æ¢ |

### æ¶æ„é€‰å‹ç†ç”±

#### ä¸ºä»€ä¹ˆé€‰æ‹© Honoï¼Ÿ

- âœ… **è¶…å¿«é€Ÿ** - æ¯” Express å¿« 4x
- âœ… **è½»é‡çº§** - æ ¸å¿ƒåªæœ‰ 12KB
- âœ… **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒ
- âœ… **ä¸­é—´ä»¶** - ä¸°å¯Œçš„ä¸­é—´ä»¶ç”Ÿæ€
- âœ… **è·¨å¹³å°** - æ”¯æŒ Node.js/Cloudflare Workers/Deno

#### ä¸ºä»€ä¹ˆé€‰æ‹© Drizzle ORMï¼Ÿ

- âœ… **ç±»å‹å®‰å…¨** - ç«¯åˆ°ç«¯ç±»å‹æ¨å¯¼
- âœ… **æ€§èƒ½** - æ¥è¿‘åŸç”Ÿ SQL çš„æ€§èƒ½
- âœ… **SQL-like** - ç†Ÿæ‚‰çš„ SQL è¯­æ³•
- âœ… **è¿ç§»** - å¼ºå¤§çš„è¿ç§»å·¥å…·
- âœ… **é›¶ä¾èµ–** - æ— éœ€è¿è¡Œæ—¶

#### ä¸ºä»€ä¹ˆé€‰æ‹© Valibotï¼Ÿ

- âœ… **è½»é‡** - æ¯” Zod å° 10x
- âœ… **å¿«é€Ÿ** - è¿è¡Œæ—¶æ€§èƒ½ä¼˜ç§€
- âœ… **å¯ç»„åˆ** - çµæ´»çš„ Schema ç»„åˆ
- âœ… **ç±»å‹æ¨å¯¼** - è‡ªåŠ¨æ¨å¯¼ TypeScript ç±»å‹

---

## ğŸ“– æœ€ä½³å®è·µ

### 1. æ¨¡å‹è®¾è®¡åŸåˆ™

#### âœ… DO - æ¨èåšæ³•

```json
{
  "name": "Product",  // âœ… ä½¿ç”¨ PascalCase
  "description": "å•†å“ç®¡ç†",  // âœ… æ·»åŠ æè¿°
  "fields": [
    {
      "name": "price",  // âœ… ä½¿ç”¨ camelCase
      "type": "decimal",
      "precision": 10,
      "scale": 2,  // âœ… æ˜ç¡®æŒ‡å®šç²¾åº¦
      "required": true,
      "validation": {
        "min": 0  // âœ… æ·»åŠ ä¸šåŠ¡éªŒè¯
      },
      "description": "å•†å“ä»·æ ¼ï¼ˆå•ä½ï¼šå…ƒï¼‰"  // âœ… æ·»åŠ å­—æ®µæè¿°
    },
    {
      "name": "status",
      "type": "string",
      "validation": {
        "enum": ["active", "inactive"]  // âœ… ä½¿ç”¨æšä¸¾é™åˆ¶å€¼
      }
    }
  ],
  "indexes": [
    {
      "name": "idx_product_status",
      "fields": ["status"]  // âœ… ä¸ºå¸¸ç”¨æŸ¥è¯¢æ·»åŠ ç´¢å¼•
    }
  ]
}
```

#### âŒ DON'T - ä¸æ¨èåšæ³•

```json
{
  "name": "product",  // âŒ åº”è¯¥ç”¨ PascalCase: "Product"
  "fields": [
    {
      "name": "Price",  // âŒ åº”è¯¥ç”¨ camelCase: "price"
      "type": "decimal"  // âŒ æœªæŒ‡å®š precision å’Œ scale
    },
    {
      "name": "status",
      "type": "string"  // âŒ æœªé™åˆ¶æšä¸¾å€¼ï¼Œå¯èƒ½å­˜å…¥ä»»æ„å€¼
    }
  ]
  // âŒ æœªæ·»åŠ ç´¢å¼•
}
```

### 2. åˆ†å±‚èŒè´£åˆ’åˆ†

#### âœ… DO - æ­£ç¡®çš„èŒè´£åˆ’åˆ†

```typescript
// Repository: åªè´Ÿè´£æ•°æ®è®¿é—®
class UserRepository {
  async findById(id: number) {
    return await db.select().from(user).where(eq(user.id, id));
  }
}

// Service: åŒ…å«ä¸šåŠ¡é€»è¾‘
class UserService {
  async getById(id: number) {
    const user = await repository.findById(id);
    if (!user) {
      throw new Error('User not found');  // âœ… ä¸šåŠ¡éªŒè¯
    }
    const { password, ...safe } = user;  // âœ… æ•°æ®è½¬æ¢
    return safe;
  }
}

// Route: å¤„ç† HTTP
route.get('/:id', async (c) => {
  const id = Number(c.req.param('id'));
  try {
    const user = await service.getById(id);
    return c.json(user);  // âœ… è¿”å›å“åº”
  } catch (error) {
    return c.json({ error: error.message }, 404);  // âœ… é”™è¯¯å¤„ç†
  }
});
```

#### âŒ DON'T - é”™è¯¯çš„èŒè´£åˆ’åˆ†

```typescript
// âŒ Repository åŒ…å«ä¸šåŠ¡é€»è¾‘
class UserRepository {
  async findById(id: number) {
    const user = await db.select().from(user).where(eq(user.id, id));
    if (!user) {
      throw new Error('User not found');  // âŒ ä¸åº”åœ¨è¿™é‡ŒéªŒè¯
    }
    const { password, ...safe } = user;  // âŒ ä¸åº”åœ¨è¿™é‡Œè½¬æ¢
    return safe;
  }
}

// âŒ Route åŒ…å«ä¸šåŠ¡é€»è¾‘
route.get('/:id', async (c) => {
  const id = Number(c.req.param('id'));
  const user = await db.select().from(user).where(eq(user.id, id));  // âŒ ç›´æ¥æ“ä½œæ•°æ®åº“
  if (!user) {
    return c.json({ error: 'Not found' }, 404);
  }
  return c.json(user);
});
```

### 3. é”™è¯¯å¤„ç†

#### âœ… DO - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†

```typescript
// å®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±»
class BusinessError extends Error {
  constructor(
    message: string,
    public statusCode: number = 400
  ) {
    super(message);
  }
}

// Service å±‚æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
class UserService {
  async getById(id: number) {
    const user = await repository.findById(id);
    if (!user) {
      throw new BusinessError('User not found', 404);
    }
    return user;
  }
}

// å…¨å±€é”™è¯¯å¤„ç†å™¨
app.onError((err, c) => {
  if (err instanceof BusinessError) {
    return c.json({ error: err.message }, err.statusCode);
  }

  console.error('Unexpected error:', err);
  return c.json({ error: 'Internal Server Error' }, 500);
});
```

### 4. æ•°æ®éªŒè¯

#### âœ… DO - åˆ†å±‚éªŒè¯

```typescript
// Route å±‚ï¼šæ ¼å¼éªŒè¯ï¼ˆValibotï¼‰
route.post('/', valibot('json', createUserSchema), async (c) => {
  const body = c.req.valid('json');  // âœ… å·²é€šè¿‡æ ¼å¼éªŒè¯

  // Service å±‚ï¼šä¸šåŠ¡éªŒè¯
  const user = await service.create(body);
  return c.json(user, 201);
});

// Service å±‚ï¼šä¸šåŠ¡éªŒè¯
class UserService {
  async create(data: CreateUserInput) {
    // âœ… ä¸šåŠ¡è§„åˆ™éªŒè¯
    const existing = await repository.findByEmail(data.email);
    if (existing) {
      throw new BusinessError('Email already exists');
    }

    return await repository.create(data);
  }
}
```

### 5. æ•°æ®åº“æ“ä½œ

#### âœ… DO - ä½¿ç”¨ Drizzle ORM

```typescript
// âœ… ç±»å‹å®‰å…¨çš„æŸ¥è¯¢
const users = await db
  .select()
  .from(user)
  .where(eq(user.role, 'admin'))
  .limit(10);

// âœ… ä½¿ç”¨äº‹åŠ¡
await db.transaction(async (tx) => {
  const user = await tx.insert(user).values(data).returning();
  await tx.insert(profile).values({ userId: user[0].id, ... });
});
```

#### âŒ DON'T - ä¸æ¨èçš„åšæ³•

```typescript
// âŒ ä¸è¦ä½¿ç”¨åŸç”Ÿ SQLï¼ˆé™¤éå¿…è¦ï¼‰
const users = await db.execute('SELECT * FROM user WHERE role = $1', ['admin']);

// âŒ ä¸è¦åœ¨å¾ªç¯ä¸­æŸ¥è¯¢æ•°æ®åº“
for (const userId of userIds) {
  const user = await db.select().from(user).where(eq(user.id, userId));
  // ...
}

// âœ… åº”è¯¥ä½¿ç”¨ IN æŸ¥è¯¢
const users = await db
  .select()
  .from(user)
  .where(inArray(user.id, userIds));
```

### 6. æ€§èƒ½ä¼˜åŒ–

#### âœ… DO - æ€§èƒ½ä¼˜åŒ–å»ºè®®

```typescript
// âœ… æ·»åŠ ç´¢å¼•
{
  "indexes": [
    {
      "name": "idx_order_user_status",
      "fields": ["userId", "status"]  // å¤åˆç´¢å¼•
    }
  ]
}

// âœ… ä½¿ç”¨åˆ†é¡µ
async findAll(page: number = 1, pageSize: number = 20) {
  const offset = (page - 1) * pageSize;
  return await db
    .select()
    .from(product)
    .limit(pageSize)
    .offset(offset);
}

// âœ… åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
const users = await db
  .select({
    id: user.id,
    name: user.name,
    email: user.email,
  })
  .from(user);
```

### 7. å®‰å…¨æ€§

#### âœ… DO - å®‰å…¨æœ€ä½³å®è·µ

```typescript
// âœ… ä¸è¿”å›æ•æ„Ÿå­—æ®µ
async getAll() {
  const users = await repository.findAll();
  return users.map(({ password, ...user }) => user);
}

// âœ… ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆDrizzle è‡ªåŠ¨å¤„ç†ï¼‰
const user = await db
  .select()
  .from(user)
  .where(eq(user.email, email));  // âœ… é˜²æ­¢ SQL æ³¨å…¥

// âœ… éªŒè¯æ‰€æœ‰è¾“å…¥
route.post('/', valibot('json', createUserSchema), async (c) => {
  const body = c.req.valid('json');  // âœ… å·²éªŒè¯
  // ...
});
```

---

## ğŸ“š æ‰©å±•é˜…è¯»

### ç›¸å…³æ–‡æ¡£

- ğŸ“– [JSON æ¨¡å‹å¿«é€Ÿå¼€å§‹](./JSON_MODEL_QUICKSTART.md) - 5 åˆ†é’Ÿä¸Šæ‰‹
- ğŸ“– [å®Œæ•´ JSON æ¨¡å‹æŒ‡å—](./JSON_MODEL.md) - è¯¦ç»†é…ç½®è¯´æ˜
- ğŸ“– [å­—æ®µé…ç½®æŒ‡å—](./JSON_MODEL_FIELD_CONFIG.md) - æ‰€æœ‰å­—æ®µé€‰é¡¹
- âœ¨ [çº¦å®šå¼å¼€å‘](./CONVENTION_AND_CONFIGURATION.md) - é›¶é…ç½®å¼€å‘
- ğŸ”€ [è·¯ç”±ç®¡ç†](./ROUTER.md) - è·¯ç”±ç³»ç»Ÿè¯´æ˜
- ğŸ”’ [è®¤è¯ç³»ç»Ÿ](./AUTH.md) - JWT è®¤è¯
- ğŸ—„ï¸ [æ•°æ®åº“è®¾è®¡](./DATABASE_SCHEMA.md) - Schema è®¾è®¡
- ğŸ§ª [æµ‹è¯•æŒ‡å—](./TESTING.md) - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- ğŸ³ [Docker éƒ¨ç½²](./DOCKER.md) - å®¹å™¨åŒ–éƒ¨ç½²

### å¤–éƒ¨èµ„æº

- [Hono å®˜æ–¹æ–‡æ¡£](https://hono.dev/)
- [Drizzle ORM æ–‡æ¡£](https://orm.drizzle.team/)
- [Valibot æ–‡æ¡£](https://valibot.dev/)
- [PostgreSQL æ–‡æ¡£](https://www.postgresql.org/docs/)

---

## ğŸ‰ æ€»ç»“

Web Lite æ¶æ„çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š

| ç‰¹æ€§ | ä¼ ç»Ÿå¼€å‘ | Web Lite |
|------|---------|----------|
| å¼€å‘æ—¶é—´ | 30-60 åˆ†é’Ÿ | **5 åˆ†é’Ÿ** |
| ä»£ç é‡ | ~300 è¡Œ | **~20 è¡Œé…ç½®** |
| ç±»å‹å®‰å…¨ | æ‰‹åŠ¨ç»´æŠ¤ | **è‡ªåŠ¨æ¨å¯¼** |
| è·¯ç”±æ³¨å†Œ | æ‰‹åŠ¨ç®¡ç† | **è‡ªåŠ¨æ³¨å†Œ** |
| ä»£ç ä¸€è‡´æ€§ | ä¾èµ–è§„èŒƒ | **è‡ªåŠ¨ç”Ÿæˆ** |
| å­¦ä¹ æ›²çº¿ | éœ€è¦å­¦ä¹ å¤šä¸ªå·¥å…· | **åªéœ€äº†è§£ JSON é…ç½®** |

### é€‚ç”¨åœºæ™¯

âœ… **é€‚åˆ**ï¼š
- ä¸­å°å‹ RESTful API é¡¹ç›®
- CRUD ä¸ºä¸»çš„ä¸šåŠ¡ç³»ç»Ÿ
- å¿«é€ŸåŸå‹å¼€å‘
- å›¢é˜Ÿåä½œé¡¹ç›®ï¼ˆç»Ÿä¸€è§„èŒƒï¼‰

âš ï¸ **ä¸å¤ªé€‚åˆ**ï¼š
- å¤æ‚çš„å›¾æŸ¥è¯¢ï¼ˆå»ºè®®ç”¨ GraphQLï¼‰
- é«˜åº¦å®šåˆ¶åŒ–çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¯åœ¨ç”Ÿæˆåæ‰‹åŠ¨æ‰©å±•ï¼‰
- å®æ—¶é€šä¿¡ä¸ºä¸»çš„ç³»ç»Ÿï¼ˆå»ºè®®ç”¨ WebSocket æ¡†æ¶ï¼‰

### å¼€å§‹ä½¿ç”¨

```bash
# 1. åˆ›å»º JSON æ¨¡å‹
vim src/models/article.model.json

# 2. ç”Ÿæˆä»£ç 
pnpm run generate:model article

# 3. æ›´æ–°æ•°æ®åº“
pnpm run db:push

# 4. å¯åŠ¨æœåŠ¡
pnpm run dev
```

**5 åˆ†é’Ÿï¼Œä»æ¨¡å‹åˆ° APIï¼** ğŸš€
